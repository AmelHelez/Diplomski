<div class="row">
  <div class="col-6 m-auto">
    <div class="card m-auto">
      <div class="card-header" style="color: white;">
        Register
      </div>
      <div class="card-body">
        <form [formGroup]="addAppointmentForm" (ngSubmit)="onSubmit2()">
          <!-- <div class="form-group col-12">
            <mat-form-field (click)="openPicker(picker)">
              <input matInput formControlName="appointmentDateTime" [ngxMatDatetimePicker]="picker" placeholder="Date"
              >
              <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
              <ngx-mat-datetime-picker #picker [showSeconds]="false" [stepHour]="1" [stepMinute]="1" [touchUi]="true"
                  [color]="'primary'" [enableMeridian]="false" [disableMinute]="false">
              </ngx-mat-datetime-picker>
            </mat-form-field> -->


          <div class="form-group col-12">
             <mat-form-field appearance="fill">
              <mat-label>Choose a date</mat-label>
              <input matInput [matDatepicker]="picker" formControlName="date" >
              <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
              <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>
            <div class="error-block" *ngIf="appointmentDate.touched && (appointmentDate.value < datum)">
              Please add date starting from today
              </div>
          </div>

          <div class="form-group col-12">
            <label>Choose employee</label>
              <select class="form-control" formControlName="employee">
                <option value="">--Select Employee--</option>
                <option *ngFor="let e of empList" value={{e.id}}>
                 {{e.name}}
                </option>
              </select>
               <div class="error-block" *ngIf="!employeeControl.valid && (employeeControl.touched)">
              Please choose employee
              </div>
            </div>

            <!-- <div *ngIf="employeeControl.value" class="form-group col-12">
               <label>Choose Time</label>
               <input type="time" formControlName="time"/>
            </div> -->

            <div *ngIf="appointmentDate.value && employeeControl.value" class="form-group col-12">
               <label for="time">Choose time</label>
               <timepicker formControlName="time"></timepicker>
               <!-- <div class="error-block" *ngIf="appointmentTime.touched && (appointmentTime.value < datum)"></div> -->
               <!-- <pre class="alert alert-info">Time is: {{mytime}}</pre> -->
             <!-- <label for="date">Date</label>
             <input type="date" class="form-control" formControlName="date"> -->
           </div>

          <div class="form-group col-12">
            <label>Treatment type</label>
              <select class="form-control" formControlName="treatment">
                <option value="">--Select--</option>
                <option *ngFor="let t of treatments" value={{t.id}}>
                 {{t.name}} ({{t.cost}})
                </option>
              </select>

               <div class="error-block" *ngIf="!treatment.valid && treatment.touched">
              Please select treatment
              </div>
            </div>

            <div *ngIf="treatment.value" class="form-group col-12">
              <label>Price</label>
              <div *ngFor="let t of treatments">
                <p *ngIf="treatment.value == t.id" style="font-style: italic; font-weight: 500;">{{t.cost}} BAM</p>
              </div>
            </div>

            <div *ngIf="whichRole() == 2" class="form-group col-12">
              <label>Add client</label>
                <select class="form-control" formControlName="client">
                  <option value="">--Select Client--</option>
                  <option *ngFor="let c of clientList" value={{c.id}}>
                   {{c.name}}
                  </option>
                </select>
              </div>


          <div class="form-group col-12">
            <button [disabled]="!addAppointmentForm.valid" type="submit" class="btn btn-primary">Save</button>
            <button type="button" class="btn btn-secondary ml-2">Cancel</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
